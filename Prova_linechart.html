<!DOCTYPE html>
<html>

<!-- Mirrored from mbostock.github.com/d3/ex/choropleth.html by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 04 Feb 2012 16:43:26 GMT -->

<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<title>Loading data</title>
	<script type="text/javascript" src="d3.min.js"></script>
	<style type="text/css">
		div.tooltip {
			position: absolute;
			text-align: center;
			width: 60px;
			height: 28px;
			padding: 2px;
			font: 12px sans-serif;
			background: lightblue;
			border: 0px;
			border-radius: 8px;
			pointer-events: none;
		}
		body{
			background-color: white;
		}
		.selected{
			opacity: 1;
		}
		.unselected{
			opacity: 0.1;
		}
		.yaxis line{
  		stroke: black;
		}

		.yaxis path{
  		stroke: black;
		}
		.xaxis line{
  		stroke: black;
		}

		.xaxis path{
  		stroke: black;
		}

		.xaxis text{
		  fill: black;
		}
		.yaxis text{
			fill: black;
		}
	</style>
</head>

<body>
	<div align="center">
		<h1>Loading data</h1>
	</div>
	<div id='chart' align="center">
	</div>
</body>

<script type="text/javascript">
var height=550;
var width=550;
var color = d3.scaleOrdinal(d3.schemeCategory10);

	var div = d3.select("body").append("div")
		.attr("class", "tooltip")
		.style("opacity", 0);

	var time_scale;
    var amount_scale;
    
	var data = [];
	
	function draw_line(d, i) {
		
		d3.csv("pca.csv", function(d) {
			
			if (d.ID == "3") {
				
				console.log("ok2")
				var key = d.ID
				//var bill_amounts = [+d.BILL_AMT1, +d.BILL_AMT2, +d.BILL_AMT3, +d.BILL_AMT4, +d.BILL_AMT5, +d.BILL_AMT6]
				//var pay_amounts = [+d.PAY_AMT1, +d.PAY_AMT2, +d.PAY_AMT3, +d.PAY_AMT4, +d.PAY_AMT5, +d.PAY_AMT6]
		
				var values = [
					{x_axis: 100, y_axis: d.BILL_AMT1},
					{x_axis: 200, y_axis: d.BILL_AMT2},
					{x_axis: 300, y_axis: d.BILL_AMT3},
					{x_axis: 400, y_axis: d.BILL_AMT4},
					{x_axis: 500, y_axis: d.BILL_AMT5},
					{x_axis: 600, y_axis: d.BILL_AMT6},
				];
				
				var line_bill = d3.line()
					.x(function(d) {console.log(time_scale(d.x_axis)); return time_scale(d.x_axis); })
					.y(function(d) {console.log(amount_scale(d.y_axis)); return amount_scale(d.y_axis); })			


				var g = d3.select("#line_chart")
						.append('g')
						.attr('id', key)
						
				g.append("path")
					.attr("d", line_bill(values))
					.attr("stroke", "blue")
					.attr("stroke-width", 3)
					.attr("fill", "none");	            
            
			/*	var lineGraph = d3.select('#chart')
					.append("path")
					.attr("d",function(d) {
					return line_bill(data);
				})
					.attr("stroke", "blue")
					.attr("stroke-width", 2)
					.attr("fill", "none");								
	*/
			}	
		});
	}
	
	function draw_chart(data) {		
			
		var container_dimensions = {width: 900, height: 500},
            margins = {top: 10, right: 20, bottom: 30, left: 60},
            chart_dimensions = {
                width: container_dimensions.width - margins.left - margins.right,
                height: container_dimensions.height - margins.top - margins.bottom
            };
            
        time_scale = d3.scaleTime()
            .range([0, chart_dimensions.width])
            .domain([0, 600]);
        
        amount_scale = d3.scaleLinear()
            .range([chart_dimensions.height, 0])
            .domain([13559, 29239]); //id=3
            //.domain([-209051, 1664089]);
            
        var time_axis = d3.axisBottom(time_scale)
        
        var amount_axis = d3.axisLeft(amount_scale)
        
		var line_chart = d3.select("body")
			.append("svg")
				.attr("width", container_dimensions.width)
				.attr("height", container_dimensions.height)
			.append("g")
				.attr("transform", "translate(" + margins.left + "," + margins.top + ")")
				.attr("id","line_chart");
			
		line_chart.append("g")
			.attr("class", "xaxis")
			.attr("transform", "translate(0," + chart_dimensions.height + ")")
			.call(time_axis)

		line_chart.append("g")
			.attr("class", "yaxis")
			.call(amount_axis)
			
			console.log("ok")			
			
		draw_line()
		
	}
	draw_chart()

</script>

</html>
